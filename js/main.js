var APP={init:function(){var e=this;this.initProgressBar();var t=$.ajax({url:"/data/tags-info.json",method:"get",contentType:"application/json"}),s=$.ajax({url:"/data/saas-need-list.json",method:"get",contentType:"application/json"}),n=$.ajax({url:"/data/saas-list.json",method:"get",contentType:"application/json"});$.when(t,s,n).done(function(t,s,n){e.tagsInfo=_.sortBy(t[0],function(e){return-e.weight}),e.needInfo=_.sortBy(s[0],function(e){return-e.weight}),e.saasInfo=_.orderBy(n[0],["interesting","weight"],["asc","desc"]),e.start()}).fail(function(){e.sp_error_vue.error=!0,e.sp_error_vue.error_msg="Fetching SaaS list failed. Please <a href=''>refresh</a>!"}).always(function(){e.sp_error_vue.loading=!1,$("#progress-bar").progress("set percent",100),$("#saas-grid").dimmer("hide"),window.clearInterval(e.progressTimer),_.delay(function(){$("#progress-bar").hide()},777)})},start:function(){this.init_vues(),this.init_DOM_events(),this.update_saas_list=_.debounce(this.update_saas_list_from_tags,1),this.source=""},subscribeUser:function(e){var t=$.ajax({url:"https://saasprofile.us16.list-manage.com/subscribe/post-json?u=8dbadfb6930326e14b50326c6&amp;id=1e3956bc84&c=?",type:"GET",data:e,cache:!1,dataType:"json",contentType:"application/json; charset=utf-8"});$.when(t).done(function(){new Noty({type:"success",text:"Thank you! Please confirm your email for updates.",theme:"sunset"}).show()}).fail(function(){new Noty({type:"error",text:"Sorry! some problem in sending the confirmation mail. If possible please try again. Thank you!",timeout:3e3}).show()}).always(function(){$("#main-subscribe-form-modal").modal("hide")})},initProgressBar:function(){$("#progress-bar").progress(),$("#saas-grid").dimmer("show");var e=33;this.progressTimer=window.setInterval(function(){var t=Math.floor(e+.33*(100-e));$("#progress-bar").progress("set percent",t),e=t},750)},init_DOM_events:function(){var e=this;$("#clear-filters").click(function(){$("#tag-list-dropdown").dropdown("set exactly",""),$("#tags-search").val("").trigger("input")}),$("#saas-need-dropdown").dropdown({onChange:_.debounce(function(){e.source="saas-need";var t=$(this).dropdown("get value");if(t){var s=_.find(e.needInfo,function(e){return e.id==t});$("#tag-list-dropdown").dropdown("set exactly",_.map(s.tags,function(e){return e+""}))}},1)}),$("#tag-list-dropdown").dropdown({onChange:function(){}}),$("#saas-count").sticky({context:"#saas-grid"}),$("#share-buttons").sticky({context:"#saas-grid"}),$(".interesting").popup(),$("#go-to-feedback").click(function(e){e.preventDefault(),$("html, body").animate({scrollTop:$("#footer").offset().top},333)}),$(".go-to-top").click(function(e){e.preventDefault(),$("html, body").animate({scrollTop:$("body").offset().top},333)}),$("#main-subscribe-form").form({on:"blur",inline:!0,fields:{empty:{identifier:"empty",rules:[{type:"empty",prompt:"Please enter a valid email address"}]}}}),$("#main-subscribe-form-modal").modal({onApprove:function(t){function s(e){var t,s,n,a,o,i={};if("?"===e.slice(0,1)&&(e=e.slice(1)),""!==e)for(t=e.split("&"),s=0;s<t.length;s+=1)n=t[s].split("="),a=decodeURIComponent(n[0]),o=n.length>1?decodeURIComponent(n[1]):void 0,i[a]=o;return i}var n=$(this).find("form"),a=n.serialize(),o=s(a);return!!$.trim(o.EMAIL)&&(e.subscribeUser(a),!1)}}),$("#footer-subscribe-form").on("click",function(t){var s=$("#footer-subscriber-email").val().trim();if(!s)return void new Noty({type:"error",text:"Please enter an email address for getting updates",timeout:3e3,theme:"sunset"}).show();e.subscribe_modal_vue.info_msg="Please Subscribe to get updates on SaaS Profile",e.subscribe_modal_vue.action_btn_text="Subscribe",e.subscribe_modal_vue.action="subscribe",$("#subscriber-email").val(s);var n=$("#main-subscribe-form"),a=n.serialize();return e.subscribeUser(a),!1}),$("#my-saas-subscribe").on("click",function(t){return e.subscribe_modal_vue.info_msg="'My SaaS' helps you to bookmark, track expense and notifies new software for any particular need. This feature will be released in near future for beta audience. If you are interested please let me know!",e.subscribe_modal_vue.action_btn_text="Notify me!",e.subscribe_modal_vue.action="mysaas",$("#main-subscribe-form-modal").modal("show"),!1}),$("#geography-subscribe").on("click",function(t){return e.subscribe_modal_vue.info_msg="This feature will be released in near future for beta audience. If you are interested please let me know!",e.subscribe_modal_vue.action_btn_text="Notify me!",e.subscribe_modal_vue.action="geography",$("#main-subscribe-form-modal").modal("show"),!1})},get_tag_icons:function(e){return DEFAULT_ICON_CLASS="tag",e.icon_class?e.icon_class+" icon":DEFAULT_ICON_CLASS+" icon"},init_vues:function(){var e=this;this.sp_error_vue=new Vue({el:"#sp-error-vue",data:{error:!1,error_msg:""}}),this.saas_need_vue=new Vue({el:"#saas-need-vue",data:{saasNeed:_.cloneDeep(this.needInfo)},methods:{get_tags_for_need:function(t){return _.filter(e.tagsInfo,function(e){return _.includes(t.tags,e.id)})},get_tag_icons:e.get_tag_icons}}),this.tags_list_vue=new Vue({el:"#tags-list-vue",data:{selected_tags:"",tags:_.cloneDeep(this.tagsInfo)},computed:{count:function(){return _.isEmpty(this.selected_tags)?_.size(this.tags):_.size(this.selected_tags)}},methods:{handleChange:_.debounce(function(t){var s=_.map(t.target.value.split(","),function(e){return _.trim(e)});"saas-need"==e.source||(e.source="tags-list"),e.update_saas_list(s)},1),get_tag_icons:e.get_tag_icons,count_msg:function(){return"Showing "+this.count+" "+(this.count>1?"tags":"tag")}}}),this.saas_list_vue=new Vue({el:"#saas-list-vue",data:{saas_list:_.cloneDeep(this.saasInfo)},computed:{count:function(){return _.size(this.saas_list)}},methods:{get_tags_for_saas_list:function(t){var s=_.filter(e.tagsInfo,function(e){return _.includes(t.tags,e.id)});return s=_.sortBy(s,function(t){return!_.includes(e.tags_list_vue.selected_tags,t.id)})},get_tag_class:function(t){return _.includes(e.tags_list_vue.selected_tags,t.id)?"ui sp-red label selected":"ui sp-red label"},count_msg:function(){return"Showing "+this.count+" "+(this.count>1?"softwares":"software")},get_saas_logo:function(e){return"/logos/"+(e.logo||"no-image.png")},get_tag_icons:e.get_tag_icons}}),this.subscribe_modal_vue=new Vue({el:"#main-subscribe-form",data:{info_msg:"Please Subscribe to get updates on SaaS Profile",action_btn_text:"Subscribe",action:"subscribe"}})},update_saas_list_from_tags:function(e){var t=[],s=_.map(_.compact(e),function(e){return parseInt(e,10)});this.tags_list_vue.selected_tags=s,"tags-list"==this.source&&$("#saas-need-dropdown").dropdown("restore defaults"),this.source="",t=_.isEmpty(s)?_.cloneDeep(this.saasInfo):_(this.saasInfo).chain().filter(function(e){return _.size(_.intersection(s,e.tags))>0}).orderBy(["interesting","weight"],["asc","desc"]).sortBy(function(e){return-_.size(_.intersection(s,e.tags))}).value(),this.saas_list_vue.saas_list=t}};$(document).ready(function(){APP.init()});
//# sourceMappingURL=main.js.map
